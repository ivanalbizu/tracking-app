(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["track"],{"53a4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.tracks?a("div",[a("section",[a("h2",{staticClass:"title-section"},[t._v(t._s(t.date))]),a("div",{staticClass:"wrapper-btns",attrs:{id:"wrapper-btns"}},[t.status.start?a("button",{staticClass:"btn btn--track",attrs:{id:"startDay()"},on:{click:function(e){return t.startDay()}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewbox:"0 0 24 24",fill:"none",stroke:"#212121","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}},[a("polygon",{attrs:{points:"5 3 19 12 5 21 5 3"}})])]):t._e(),t.status.play?a("button",{staticClass:"btn btn--track",attrs:{id:"play"},on:{click:function(e){return t.play()}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewbox:"0 0 24 24",fill:"none",stroke:"#212121","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}},[a("polygon",{attrs:{points:"5 3 19 12 5 21 5 3"}})])]):t._e(),t.status.pause?a("button",{staticClass:"btn btn--track",attrs:{id:"pause"},on:{click:function(e){return t.pause()}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewbox:"0 0 24 24",fill:"none",stroke:"#212121","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}},[a("rect",{attrs:{x:"6",y:"4",width:"4",height:"16"}}),a("rect",{attrs:{x:"14",y:"4",width:"4",height:"16"}})])]):t._e(),t.status.stop?a("button",{staticClass:"btn btn--track",attrs:{id:"stop"},on:{click:function(e){return t.stop()}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewbox:"0 0 24 24",fill:"none",stroke:"#212121","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}},[a("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}})])]):t._e()])]),a("section",{staticClass:"details"},[a("ul",{staticClass:"current-work-day",attrs:{id:"current-work-day","data-date":t.date}},t._l(t.tracks,(function(e,r){return a("li",{key:r,attrs:{"data-type":e.type}},["work"==e.type?a("div",{staticClass:"state"},[t._v("Trabajo")]):t._e(),"break"==e.type?a("div",{staticClass:"state"},[t._v("Descanso")]):t._e(),a("span",{staticClass:"time-start"},[t._v(t._s(e.time_start))]),a("span",[t._v(" - ")]),a("span",{staticClass:"time-end"},[t._v(t._s(e.time_end))])])})),0)])]):t._e()},n=[],s=(a("99af"),a("96cf"),a("1da1")),o=a("bc3a"),i=a.n(o),c=a("4360"),u={data:function(){return{tracks:[],date:"",status:{},notifyID:null,notifyTimeOut:null}},created:function(){this.listarTracks(),this.today()},methods:{today:function(){this.date=this._getDate(new Date)},statusHandler:function(t){if(t)switch(t[t.length-1].type){case"work":this.status={start:!1,play:!1,pause:!0,stop:!0};break;case"break":this.status={start:!1,play:!0,pause:!1,stop:!0};break;case"stop":this.status={start:!1,play:!0,pause:!0,stop:!1};break;default:break}else this.status={start:!0,play:!1,pause:!1,stop:!1}},listarTracks:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("/track");case 3:a=e.sent,200===!a.status&&t.$router.push("/login"),t.statusHandler(a.data.tracking[t.date]),a.data.tracking[t.date]&&(t.tracks=a.data.tracking[t.date]),c["a"].commit("SET_NOTIFICATION",a.data.config.notifyTimeOut),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log("error GET track del día: >> ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},startDay:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.status={start:!1,play:!1,pause:!0,stop:!0},a=t._request(),e.prev=2,e.next=5,i.a.post("/track/start",a);case 5:r=e.sent,t.tracks=r.data,t.$toasted.show("Inicio de trabajo",{type:"info"}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log("error al enviar POST para comenzar la grabación del día: >> ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},play:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.notifyDelete(t.notifyID),t.status={start:!1,play:!1,pause:!0,stop:!0},a=t._request(),e.prev=3,e.next=6,i.a.post("/track/play",a);case 6:r=e.sent,t.tracks=r.data,t.$toasted.show("Inicio de trabajo",{type:"info"}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),console.log("error al enviar POST para iniciar tiempo de trabajo: >> ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))()},pause:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return(null===(a=c["a"].getters["auth/user"])||void 0===a?void 0:a.email)&&c["a"].getters["notification"]&&(t.notifyID=t.notifyCreate(c["a"].getters["notification"])),t.status={start:!1,play:!0,pause:!1,stop:!0},r=t._request(),e.prev=3,e.next=6,i.a.post("/track/pause",r);case 6:n=e.sent,t.tracks=n.data,t.$toasted.show("Inicio de pausa",{type:"info"}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),console.log("error al enviar POST para iniciar tiempo de trabajo: >> ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))()},stop:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.status.play?t.status={start:!1,play:!0,pause:!1,stop:!0}:t.status={start:!1,play:!1,pause:!0,stop:!0},a=t._request(),e.prev=2,e.next=5,i.a.post("/track/stop",a);case 5:r=e.sent,t.tracks=r.data,t.$toasted.show("Actualizada la hora",{type:"info"}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log("error al enviar POST para iniciar tiempo de trabajo: >> ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},_request:function(){var t=new Date;return{date:this._getDate(t),time:this._getTime(t)}},_getDate:function(t){var e=t.getDate(),a=t.getMonth()+1,r=t.getFullYear();return a<10?"".concat(e,"-0").concat(a,"-").concat(r):"".concat(e,"-").concat(a,"-").concat(r)},_getTime:function(t){return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},notifyCreate:function(t){var e,a=this;if(null===(e=c["a"].getters["auth/user"])||void 0===e?void 0:e.email){var r=null;if(Notification){"granted"!==Notification.permission&&Notification.requestPermission();var n="Tarea en pausa",s={icon:"https://via.placeholder.com/512x512",body:"La pausa ha llegado a ".concat(c["a"].getters["notification"]/6e4," minutos")};return r=window.setTimeout((function(){var t=new Notification(n,s);t.onclick=function(t){t.preventDefault(),window.open("/track","_blank")},a.notifyID=null}),t),this.$socket.emit("user_pause",c["a"].getters["auth/user"].email),console.log("Notify created :>> ",r),r}console.log("Este navegador no soporta las notificaciones del sistema")}},notifyDelete:function(t){t&&(window.clearInterval(t),console.log("Notify deleted :>> ",t),this.notifyID=null)}}},l=u,p=(a("79ab"),a("2877")),d=Object(p["a"])(l,r,n,!1,null,"dab01a7e",null);e["default"]=d.exports},"79ab":function(t,e,a){"use strict";var r=a("f90c"),n=a.n(r);n.a},"99af":function(t,e,a){"use strict";var r=a("23e7"),n=a("d039"),s=a("e8b5"),o=a("861d"),i=a("7b0b"),c=a("50c4"),u=a("8418"),l=a("65f0"),p=a("1dde"),d=a("b622"),f=a("2d00"),h=d("isConcatSpreadable"),w=9007199254740991,v="Maximum allowed index exceeded",g=f>=51||!n((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),k=p("concat"),b=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:s(t)},y=!g||!k;r({target:"Array",proto:!0,forced:y},{concat:function(t){var e,a,r,n,s,o=i(this),p=l(o,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(s=-1===e?o:arguments[e],b(s)){if(n=c(s.length),d+n>w)throw TypeError(v);for(a=0;a<n;a++,d++)a in s&&u(p,d,s[a])}else{if(d>=w)throw TypeError(v);u(p,d++,s)}return p.length=d,p}})},f90c:function(t,e,a){}}]);
//# sourceMappingURL=track.fe033d8b.js.map